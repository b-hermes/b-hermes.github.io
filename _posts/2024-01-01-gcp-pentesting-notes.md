---
title: Some handy notes for GCP pentesting
date: 2024-01-01 04:30:SS +/-TTTT
categories: [TOP_CATEGORIE, SUB_CATEGORIE]
tags: [TAG]     # TAG names should always be lowercase
---
Hey folks!
Here's some notes that I use when validating some GCP service accounts and looking for SSRFs.

<h3>How to authenticate in a service account using the GCP CLI</h3>
~~~bash
gcloud auth activate-service-account 1234567-compute@developer.gserviceaccount.com --key-file=pathtofile.json --project=project_name
~~~
The e-mail address you will copy from the json file, also the key file you will point to where the file it's saved, and the project name you also can get in the file.

<h3>List of some commands</h3>
~~~bash
#List SSL certificates 
gcloud compute ssl-certificates list
#List compute engine image disks
gcloud compute images list
#List compute engine instances
gcloud compute instances list
#List buckets
gcloud storage ls
#List buckets using gsutil
gsutil ls
#List containers
gcloud container images list
#List clusters
gcloud container clusters list
#List firewall rules
gcloud compute firewall-rules list
~~~

<h3>Achieving SSRFs in Axios</h3>
When attempting to achieve SSRF in a GCP environment, it's mandatory to have a 'Metada-Flavor: Google' header to your request.


In Axios, you can add headers to your request by default, you just need to create an object in the request body and it's done.

![Desktop View](/assets/img/Snapshot_2024-01-08_00-09-27.png)

<h3>Some usefull links and tools</h3>
[GCP Pentesting - Hacktricks ](https://cloud.hacktricks.xyz/pentesting-cloud/gcp-security)

[GCP Services - Hacktricks](https://cloud.hacktricks.xyz/pentesting-cloud/gcp-security/gcp-services)

[Awesome GCP Pentesting](https://github.com/Littlehack3r/awesome-gcp-pentesting)
